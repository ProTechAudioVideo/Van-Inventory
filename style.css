/* /style.css */

/* ===== Base / reset ===== */
* { box-sizing: border-box; }
html, body { max-width: 100%; overflow-x: hidden; }
html { -webkit-text-size-adjust: 100%; }
body { font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; margin:16px; }
h1 { margin:0 0 8px; }
a { color:#064e3b; }
button { cursor:pointer; }

/* ===== Toolbar ===== */
.toolbar {
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
  margin:8px 0;
}
.toolbar-left { display:flex; gap:8px; align-items:center; }
.toolbar-right { display:flex; gap:8px; align-items:center; }
#add-folder, #download-json, #toggle-lock { padding:6px 10px; }
#toggle-lock { border:1px solid #94a3b8; background:#f1f5f9; border-radius:6px; }
#add-folder { display:inline-flex; } /* JS hides this when locked */

/* ===== Folder header (caret) ===== */
.folder { display:flex; align-items:center; gap:8px; margin-top:14px; font-weight:600; }
.folder-title { flex:1; user-select:none; }

/* Editable folder title (unlocked mode) */
.folder-title.editable { cursor:text; border-bottom:1px dashed transparent; }
.folder-title.editable:hover { border-bottom-color:#cbd5e1; }

/* Inline title input when renaming */
.folder-title-input {
  font: inherit;
  font-weight: 600;
  padding: 4px 6px;
  border: 1px solid #cbd5e1;
  border-radius: 4px;
  min-width: 8ch;
}

.caret {
  width:26px; height:26px; border:1px solid #cbd5e1; border-radius:4px; background:#fff;
  display:inline-flex; align-items:center; justify-content:center; line-height:1; font-size:16px;
}
.caret:focus { outline:2px solid #0ea5e9; outline-offset:2px; }
.delete-btn {
  background:#fee2e2; color:#991b1b; border:1px solid #fca5a5; border-radius:4px;
  padding:4px 6px; font-size:.9rem;
}

/* ===== Items list ===== */
.folder-items { margin:8px 0 16px 34px; }
.folder.collapsed + .folder-items { display:none; }

/* ===== Item rows ===== */
.row { display:flex; flex-direction:column; gap:6px; margin:8px 0; }
.row-main { display:flex; align-items:center; gap:8px; flex-wrap:nowrap; }
.row-main > * { flex: 0 0 auto; }

/* Name input + static text */
.row input[type="text"]{
  min-width:0;
  flex:1 1 auto;
  padding:6px 8px;
}
.name-text {
  flex:1 1 auto;
  padding:6px 8px;
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:4px;
}

/* Qty input + static number */
input[type="number"]{
  width:2.8em;
  text-align:center;
  -moz-appearance:textfield;
  appearance:textfield;
  padding:6px 6px;
}
input[type="number"]::-webkit-outer-spin-button,
input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }

.qty-text{
  min-width:2.35em;
  text-align:center;
  padding:6px 6px;
  border:1px solid #e5e7eb;
  border-radius:4px;
  background:#fff;
}

/* ===== Length input and display ===== */
.len-group { display:flex; align-items:center; gap:4px; }
.len-input {
  width:3.8em;              /* a touch wider than qty */
  text-align:center;
  -moz-appearance:textfield;
  appearance:textfield;
  padding:6px 6px;
}
.len-input::-webkit-outer-spin-button,
.len-input::-webkit-inner-spin-button{ -webkit-appearance:none; margin:0; }
.unit { font-size:.9rem; color:#334155; }
.len-text {
  min-width:max(3.2em, 2.35em);
  text-align:center;
  padding:6px 6px;
  border:1px solid #e5e7eb;
  border-radius:4px;
  background:#fff;
}

/* Buttons in rows */
.row button { padding:4px 8px; }

/* ===== Status (unlocked buttons) ===== */
.status-bar { display:flex; gap:6px; flex-wrap:wrap; padding-left:0; }
.status-btn {
  border:1px solid #cbd5e1; background:#f8fafc; color:#0f172a; border-radius:4px;
  padding:4px 10px; font-size:.8rem;
}
.status-btn[aria-pressed="true"] { font-weight:700; }
.status-btn.full[aria-pressed="true"]  { background:#dcfce7; border-color:#22c55e; color:#14532d; }
.status-btn.mid[aria-pressed="true"]   { background:#fef9c3; border-color:#eab308; color:#713f12; }
.status-btn.low[aria-pressed="true"]   { background:#ffedd5; border-color:#f97316; color:#7c2d12; }
.status-btn.empty[aria-pressed="true"] { background:#fee2e2; border-color:#ef4444; color:#991b1b; }

/* Locked status chips (non-interactive) */
.status-chip {
  display:inline-block;
  border:1px solid #cbd5e1;
  background:#f8fafc;
  color:#0f172a;
  border-radius:999px;
  padding:2px 10px;
  font-size:.75rem;
}
.status-chip.full  { background:#dcfce7; border-color:#22c55e; color:#14532d; }
.status-chip.mid   { background:#fef9c3; border-color:#eab308; color:#713f12; }
.status-chip.low   { background:#ffedd5; border-color:#f97316; color:#7c2d12; }
.status-chip.empty { background:#fee2e2; border-color:#ef4444; color:#991b1b; }
.status-chip.none  { background:#f1f5f9; border-color:#cbd5e1; color:#475569; }

/* Convert/type cycle button (unlocked only) */
.convert-btn {
  border:1px dashed #94a3b8;
  background:#f8fafc;
  color:#475569;
  border-radius:4px;
  padding:4px 8px;
  font-size:.75rem;
}

/* ===== Add-item popover ===== */
.popover {
  position:absolute;
  z-index:999;
  background:#fff;
  border:1px solid #e5e7eb;
  border-radius:8px;
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  padding:6px;
  min-width:180px;
}
.popover-item {
  display:block;
  width:100%;
  text-align:left;
  padding:8px 10px;
  border:none;
  background:transparent;
  border-radius:6px;
}
.popover-item:hover,
.popover-item:focus { background:#f1f5f9; }

/* ===== iPhone portrait tweaks ===== */
@media (max-width: 430px) {
  body { margin:12px; }
  .caret { width:22px; height:22px; }
  .folder-items { margin-left:18px; }
  .row-main { gap:6px; }
  input[type="number"] { width:2.35em; padding:6px 4px; }
  .len-input { width:3.4em; padding:6px 4px; }
  .status-btn { padding:3px 8px; font-size:.75rem; }
}

/* Guard against phantom overflow */
.container, .folder, .row, .row-main, .status-bar { max-width:100%; }
